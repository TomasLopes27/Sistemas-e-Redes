<h2>Administra√ß√£o de Concertos</h2>

<p *ngIf="error" class="error">{{ error }}</p>

<!-- Bot√£o para abrir/fechar o formul√°rio de cria√ß√£o de v√≠deo -->
<button (click)="toggleForm()" class="btn-toggle-form">
  {{ showForm ? 'Fechar formul√°rio' : 'Criar V√≠deo' }}
</button>

<!-- Bot√£o para alternar entre todos os concertos e os reportados -->
<button class="btn-report" (click)="toggleReportedConcerts()">
  {{ showReported ? 'Ver Todos os Concertos' : 'Ver Concertos Reportados' }}
</button>

<!-- Formul√°rio de cria√ß√£o de v√≠deo -->
<div *ngIf="showForm">
  <form (ngSubmit)="saveConcert()">
    <label>T√≠tulo: <input [(ngModel)]="newConcert.title" name="title" required /></label><br />
    <label>URL do YouTube: <input [(ngModel)]="newConcert.url" name="url" required /></label><br />
    <label>Artista: <input [(ngModel)]="newConcert.artist" name="artist" required /></label><br />
    <label>G√©nero: <input [(ngModel)]="newConcert.genre" name="genre" required /></label><br />
    <label>Data: <input [(ngModel)]="newConcert.release_date" name="release_date" type="date" required /></label><br />
    <label>Imagem URL: <input [(ngModel)]="newConcert.image_url" name="image_url" /></label><br />

    <button type="submit">{{ editMode ? 'Atualizar' : 'Criar' }}</button>
    <button type="button" (click)="resetForm()" *ngIf="editMode">Cancelar</button>
  </form>
</div>

<hr />

<!-- Se estiver a mostrar apenas os concertos reportados -->
<div *ngIf="showReported">
  <h3>Concertos Reportados</h3>
  <ul>
    <li *ngFor="let c of reportedConcerts">
      <strong>{{ c.title }}</strong>
      <span class="artist">{{ c.artist_name }}</span>
      <div>
        <p><strong>Tipo de Issue:</strong> {{ c.issue_type }}</p>
        <p><strong>Descri√ß√£o:</strong> {{ c.description }}</p>
        <p><strong>Data:</strong> {{ c.created_at | date: 'short' }}</p>
      </div>
      <div class="btn-container">
        <button (click)="deleteConcert(c.concert_id)">üóëÔ∏è Apagar</button>
      </div>
    </li>
  </ul>
</div>

<!-- Caso contr√°rio, exibe todos os concertos -->
<div *ngIf="!showReported">
  <h3>Todos os Concertos</h3>
  <ul>
    <li *ngFor="let c of concerts">
      <strong>{{ c.title }}</strong>
      <span class="artist">{{ c.artist }}</span>
      <div class="btn-container">
        <button (click)="editConcert(c)">‚úèÔ∏è Editar</button>
        <button (click)="deleteConcert(c.id)">üóëÔ∏è Apagar</button>
      </div>
    </li>
  </ul>
</div>
